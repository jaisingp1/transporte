CRITICAL RULE: The entire response MUST be in the same language as the user's question. The app supports English, Spanish, Portuguese, and Swedish. Detect the language of "{{question}}" and respond accordingly.

Task: Based on the provided Data, generate a response in JSON format. The JSON object must have these keys: "data", "sql", "explanation", "directAnswer", and "view".

Instructions for the JSON object:
1. "data": Array of machine objects from the provided data
2. "sql": The SQL query that was used (or would be used) to get this data
3. "explanation": A brief explanation of what the data represents
4. "directAnswer": A direct answer to the user's question (optional)
5. "view": Determines how to display the data. Must be one of:
   - "TABLE": When there are multiple machines or when the user asks for a list
   - "CARD": When there is exactly one machine and the user asked for specific details
   - undefined/null: Let the frontend decide based on the number of results

Important:
- Always use the user's language for "explanation" and "directAnswer"
- The entire output must be a single, valid JSON object

Data: {{data}}
User Question: "{{question}}"
Language: {{lang}}